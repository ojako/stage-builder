
<div class="row">
  <div class="col-xs-12">
    <div class="challenge-stages-container">
      <div ng-model="startStage" ng-click="$ctrl.inspectorTabActive = 1" class="challenge-stages-start"><i class="fa fa-trophy"></i> {$ startStageName ? startStageName : 'Capture' $}</div>
      <div class="text-center">
        <div class="challenge-transition-stage text-center sortable-ignored"> Manually Closes</div>
      </div>
      <stage-builder-menu on-add-stage="$ctrl.addStage(type, $index)" stage-types="$ctrl.stageTypes" stage-index="$index"></stage-builder-menu>
      <ul id="stageList" ng-sortable="{animation: 150}" class="list-unstyled">
        <li ng-repeat="stage in $ctrl.currentStages" class="challenge-stage-list-item">
          <stage-detail stage="stage" last="$last" on-delete="$ctrl.deleteStage(stage)" on-add-stage="$ctrl.addStage()" stage-types="$ctrl.stageTypes" select-stage="$ctrl.selectedStage(stage)" selected-stage="$ctrl.selected" ng-class="{'selected': $ctrl.selectedStage === stage}"></stage-detail>
          <stage-builder-menu on-add-stage="$ctrl.addStage(type, $index)" stage-types="$ctrl.stageTypes" stage-index="$index"></stage-builder-menu>
        </li>
      </ul>
      <div ng-model="endStage" ng-click="$ctrl.inspectorTabActive = 2" class="challenge-stages-end"><i class="fa fa-flag-checkered"></i> {$ endStageName ? endStageName : 'Finish' $}</div>
    </div>
    <div class="challenge-stages-inspector sticky">
      <div class="challenge-stages-inspector-inner">
        <div ng-show="!$ctrl.selected" class="alert alert-info">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nulla, voluptates laudantium, perferendis reprehenderit quidem assumenda rem fuga voluptatem voluptas dignissimos incidunt amet adipisci ducimus, cumque placeat quod similique officia enim.</div>
        <uib-tabset active="$ctrl.inspectorTabActive" ng-show="$ctrl.selected">
          <uib-tab heading="{$ $ctrl.selected.name ? $ctrl.selected.name : 'New Stage' $}" ng-show="$ctrl.selected" index="3">
            <h3>Stage Settings</h3>
            <form name="stage-settings">
              <div class="form-group">
                <input type="text" ng-model="$ctrl.selected.name" required="required" class="form-control"/>
              </div>
              <div class="form-group">
                <select ng-model="$ctrl.selected.type" ng-class="$ctrl.stage.type" required="required" class="form-control">
                  <option disabled="disabled" selected="selected" value="value">-- Select Stage Type --</option>
                  <option ng-repeat="type in $ctrl.stageTypes track by $index" value="{$ type $}">{$ type $}</option>
                </select>
              </div>
              <stage-builder-options type="$ctrl.selected.type"></stage-builder-options>
            </form>
          </uib-tab>
          <uib-tab heading="Advanced">
            <h3>Advanced Settings</h3>
            <div class="form-group">
              <select ng-model="$ctrl.selected.progression" required="required" class="form-control">
                <option disabled="disabled" selected="selected" value="value">-- Select Stage Type --</option>
                <option ng-repeat="type in $ctrl.progressionTypes track by $index" value="{$ type $}">{$ type $}</option>
              </select>
            </div>
            <stage-progression-options type="$ctrl.selected.progression"></stage-progression-options>
          </uib-tab>
        </uib-tabset>
      </div>
    </div>
  </div>
</div>