// output:../../views/stage-builder.html

.row
  .col-xs-12
    .challenge-stages-container

      //- Challenge list
      //- !alwaysTrue hack
      div(ng-if="!alwaysTrue")
      
        //- Phased or Parallel
        .callout.callout-sm.callout-top.select-top.text-center
          .callout-heading
            h4 Set Phased or Parallel
          .form-group
            label.btn.btn-label
              | #[input(type="radio", ng-model="$ctrl.challenge.type", value="phased")] Phased
              
            label.btn.btn-label
              | #[input(type="radio", ng-model="$ctrl.challenge.type", value="parallel")] Parallel

            em.btn-block {$ $ctrl.challenge.type === 'phased' ? 'Ideas enter your challenge and progress through the stages togther' : 'Ideas enter your challenge and progress through the stages independent of other ideas' $}

        ul.list-unstyled.challenge-stage-list-container.clearfix(ng-sortable="$ctrl.sortableConf" draggable="false")
          li.challenge-stage-list-item.ng-anim-fade(
            ng-repeat="stage in $ctrl.challenge.stages track by stage.id"
            ng-class="!stage.editSettings.sortable ? 'fixed-item' : 'sortable-item'"
          )
            stage-detail(
              stage="stage"
              last="$last"
              first="$first"
              users="$ctrl.users"
              on-delete="$ctrl.deleteStage(stage)"
              stage-types="$ctrl.stageTypes"
              inspector-tab="$ctrl.inspectorTabActive"
              stage-index="$index"
            )
            .challenge-stage-add-new(ng-if="!stage.deleted && !$last")
              stage-builder-menu(
                on-add-stage="$ctrl.addStage(type, $index)", stage-types="$ctrl.stageTypes", stage-index="$index", num-stages="$ctrl.challenge.stages.length")
